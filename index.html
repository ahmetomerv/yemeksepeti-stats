<!doctype html>
<html lang="en">
<head>
   <meta charset="UTF-8">
   <meta name="viewport" content="width=device-width, user-scalable=no, initial-scale=1.0, maximum-scale=1.0, minimum-scale=1.0">
   <meta http-equiv="X-UA-Compatible" content="ie=edge">
   <title>Yemeksepeti Stats</title>

   <link rel="shortcut icon" href="assets/ys-icon.ico"/>
   <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css" integrity="sha384-ggOyR0iXCbMQv3Xipma34MD+dH/1fQ784/j6cY/iJTQUOhcWr7x9JvoRxT2MZw1T" crossorigin="anonymous">
   <link href="https://stackpath.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min.css" rel="stylesheet" integrity="sha384-wvfXpqpZZVQGK6TAh5PVlGOfQNHSoD2xbE+QkPxCAFlNEevoEH3Sl0sibVcOQVnN" crossorigin="anonymous">  
   <link href="styles/tomorrow-night-bright.css" rel="stylesheet">
   <link href="styles/styles.css" rel="stylesheet">
</head>
<body>
   <nav class="navbar navbar-expand-lg navbar-light bg-light justify-content-between">
      <div class="container">
         <a class="navbar-brand" href="#">
            <img src="assets/img/ys-icon.svg" width="30" height="30" alt="Logo">
         </a>
         <div class="navbar-nav">
            <a class="nav-item nav-link active" href="/">Home <span class="sr-only"></span></a>
            <a class="nav-item nav-link" target="_blank" rel="noopener noreferrer" href="https://github.com/ahmetomerv/yemeksepeti-stats">GitHub</a>
         </div>
      </div>
   </nav>
   
   <div class="container">
      <h1 class="mt-5">Yemeksepeti Stats</h1>
      <p>Order statistics tool for Yemeksepeti. Orders history data are collected from DOM elements since Yemeksepeti doesn't have a public API. There is a way to listen to outgoing POST network calls to <code>/Account/GetOrderHistory</code> and access the data, which is triggered on scroll, but there's no way to run the code and catch the first request(well, this can be done with a browser extension, but I find that kind of usage to be inconvenient, for the time being at least).</p>
      <p>One little drawback is that this only works for order history that are more than 3 pages, which are about 60 orders. This has to do with a bug Yemeksepeti API has which always returns <code>false</code> for <code>HasNextPage</code> property in the fourth call.</p>

      <br>

      <div class="steps-container">
         <div class="demo-container">
            <img class="demo-gif" src="assets/demo.gif" alt="Demo gif"/>
         </div>

         <h4>Usage</h4>
         <div>
            <p>To get your order history (overview <a title="Sample overview image output" href="assets/samples/ys-stats.png">image</a> and <a title="Sample json output" href="assets/samples/sample-data.json">json</a> file will be downloaded):</p>
            <ul class="steps-list">
               <li>1 - Copy the code below</li>
               <li>2 - Go to <a href="https://www.yemeksepeti.com/hesabim/onceki-siparislerim">Yemeksepeti Order History</a> page</li>
               <li>3 - Open the console with F12</li>
               <li>4 - Paste the code and press Enter</li>
            </ul>
         </div>
      </div>

      <div class="js-code-container" id="js-code-snippet"></div>
   </div>

   <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.0/jquery.min.js"></script>
   <script src="scripts/lib/hljs/highlightjs.pack.js"></script>
   <script src="scripts/lib/hljs/highlightjs-badge.min.js"></script>
   <script src="scripts/index.js"></script>
</body>
</html>
